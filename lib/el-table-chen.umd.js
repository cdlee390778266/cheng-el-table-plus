(function(e,C){typeof exports=="object"&&typeof module<"u"?module.exports=C(require("vue")):typeof define=="function"&&define.amd?define(["vue"],C):(e=typeof globalThis<"u"?globalThis:e||self,e.el_table_chen=C(e.Vue))})(this,function(e){"use strict";/*! Element Plus v2.2.28 */var C={name:"zh-cn",el:{colorpicker:{confirm:"确定",clear:"清空"},datepicker:{now:"此刻",today:"今天",cancel:"取消",clear:"清空",confirm:"确定",selectDate:"选择日期",selectTime:"选择时间",startDate:"开始日期",startTime:"开始时间",endDate:"结束日期",endTime:"结束时间",prevYear:"前一年",nextYear:"后一年",prevMonth:"上个月",nextMonth:"下个月",year:"年",month1:"1 月",month2:"2 月",month3:"3 月",month4:"4 月",month5:"5 月",month6:"6 月",month7:"7 月",month8:"8 月",month9:"9 月",month10:"10 月",month11:"11 月",month12:"12 月",weeks:{sun:"日",mon:"一",tue:"二",wed:"三",thu:"四",fri:"五",sat:"六"},months:{jan:"一月",feb:"二月",mar:"三月",apr:"四月",may:"五月",jun:"六月",jul:"七月",aug:"八月",sep:"九月",oct:"十月",nov:"十一月",dec:"十二月"}},select:{loading:"加载中",noMatch:"无匹配数据",noData:"无数据",placeholder:"请选择"},cascader:{noMatch:"无匹配数据",loading:"加载中",placeholder:"请选择",noData:"暂无数据"},pagination:{goto:"前往",pagesize:"条/页",total:"共 {total} 条",pageClassifier:"页",deprecationWarning:"你使用了一些已被废弃的用法，请参考 el-pagination 的官方文档"},messagebox:{title:"提示",confirm:"确定",cancel:"取消",error:"输入的数据不合法!"},upload:{deleteTip:"按 delete 键可删除",delete:"删除",preview:"查看图片",continue:"继续上传"},table:{emptyText:"暂无数据",confirmFilter:"筛选",resetFilter:"重置",clearFilter:"全部",sumText:"合计"},tree:{emptyText:"暂无数据"},transfer:{noMatch:"无匹配数据",noData:"无数据",titles:["列表 1","列表 2"],filterPlaceholder:"请输入搜索内容",noCheckedFormat:"共 {total} 项",hasCheckedFormat:"已选 {checked}/{total} 项"},image:{error:"加载失败"},pageHeader:{title:"返回"},popconfirm:{confirmButtonText:"确定",cancelButtonText:"取消"}}};/*! Element Plus v2.2.28 */var j={name:"en",el:{colorpicker:{confirm:"OK",clear:"Clear",defaultLabel:"color picker",description:"current color is {color}. press enter to select a new color."},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",dateTablePrompt:"Use the arrow keys and enter to select the day of the month",monthTablePrompt:"Use the arrow keys and enter to select the month",yearTablePrompt:"Use the arrow keys and enter to select the year",selectedDate:"Selected date",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},weeksFull:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},inputNumber:{decrease:"decrease number",increase:"increase number"},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},dropdown:{toggleDropdown:"Toggle Dropdown"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},dialog:{close:"Close this dialog"},drawer:{close:"Close this dialog"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input",close:"Close this dialog"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},slider:{defaultLabel:"slider between {min} and {max}",defaultRangeStartLabel:"pick start value",defaultRangeEndLabel:"pick end value"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"}}};const ke="",O=(o,k)=>{const n=o.__vccOpts||o;for(const[T,z]of k)n[T]=z;return n},U={class:"dflex"},q={class:"chen-table-wrapper"},Y={key:1},J=["onClick"],G={class:"dflex"},W={class:"flex ellipsis"},Q={class:"ellipsis"},X=["title"],Z={key:0},v={class:"dflex ellipsis"},ee={class:"flex ellipsis"},te={key:1,class:"dflex ellipsis"},ne=["title"],ae={key:0,class:"pagination-wrapper"},x=O({__name:"el-table-chen",props:{type:{type:String,default:"table"},toggleConfig:{type:Object,default:()=>({show:!1,tableIconClass:"",cardIconClass:"",tgClass:""})},apiFn:{type:Function,default:null},responseFn:{type:Function,default:null},tableData:{type:Array,default:null},autoGetData:{type:Boolean,default:!0},currentRow:{type:Boolean,default:!1},query:{type:[String,Object],default:""},tableConfig:{type:Object,default:()=>{}},columnsConfig:{type:Array,default:()=>[]},rowKey:{type:String,default:"id"},selection:{type:Boolean,default:!1},single:{type:Boolean,default:!1},pagination:{type:Boolean,default:!0},pageSizes:{type:Array,default:()=>[10,20,50]},defaultPageSize:{type:Number,default:10},pageLayout:{type:String,default:"total, sizes, prev, pager, next, jumper"},containerId:{type:String,default:""},autoHeight:{type:Boolean,default:!0},offsetHeight:{type:Number,default:70},minHeight:{type:Number,default:200},noDefaultHeight:{type:Boolean,default:!1},maxTableHeight:{type:Number,default:1e12},defaultSelectionKeys:{type:Array,default:()=>[]},cardConfig:{type:Object,default:()=>({slotName:"",emptySlotName:"",grid:{xs:24,sm:12,md:12,lg:8}})},finishCallBack:{type:Function,default:()=>{}},emptySlotName:{type:String,default:""},language:{type:String,default:"zh-cn",validator(o){return["zh-cn","en"].includes(o)}},changePageKeepSelection:{type:Boolean,default:!1}},setup(o,{expose:k}){const n=o;let T=e.ref('<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" data-v-029747aa=""><path fill="currentColor" d="M160 448a32 32 0 0 1-32-32V160.064a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V416a32 32 0 0 1-32 32H160zm448 0a32 32 0 0 1-32-32V160.064a32 32 0 0 1 32-32h255.936a32 32 0 0 1 32 32V416a32 32 0 0 1-32 32H608zM160 896a32 32 0 0 1-32-32V608a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32v256a32 32 0 0 1-32 32H160zm448 0a32 32 0 0 1-32-32V608a32 32 0 0 1 32-32h255.936a32 32 0 0 1 32 32v256a32 32 0 0 1-32 32H608z"></path></svg>'),z=e.ref('<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" data-v-029747aa=""><path fill="currentColor" d="M389.44 768a96.064 96.064 0 0 1 181.12 0H896v64H570.56a96.064 96.064 0 0 1-181.12 0H128v-64h261.44zm192-288a96.064 96.064 0 0 1 181.12 0H896v64H762.56a96.064 96.064 0 0 1-181.12 0H128v-64h453.44zm-320-288a96.064 96.064 0 0 1 181.12 0H896v64H442.56a96.064 96.064 0 0 1-181.12 0H128v-64h133.44z"></path></svg>'),B=e.ref(!1),H=e.ref(!1),D=e.ref(600),g=e.ref("table"),r=e.reactive([]),i=e.reactive([]),w=e.ref(0),s=e.reactive({pageSizes:n.pageSizes,defaultPageSize:n.defaultPageSize,currentPage:1});const m=e.ref(null),$=e.getCurrentInstance(),F=e.inject("elTableChenOptions");let b=e.reactive({}),oe=e.reactive({xs:24,sm:12,md:12,lg:8});e.watch(()=>n.columnsConfig,()=>{b=n.columnsConfig.find(t=>(t.props==="handle"||t.slotName==="handle")&&!t.hidden)},{deep:!0,immediate:!0}),e.watch(()=>n.tableData,()=>{H.value=!1,r.length=0,N()},{deep:!0,immediate:!0}),e.watch(i,()=>{!n.changePageKeepSelection||n.apiFn?(r.length=0,n.defaultSelectionKeys&&n.defaultSelectionKeys.length&&A()):H.value?ue():(n.defaultSelectionIds&&n.defaultSelectionIds.length&&A(),H.value=!0)}),e.watch(()=>n.defaultSelectionKeys,()=>{var t;r.length=0,(t=m.value)==null||t.clearSelection(),n.defaultSelectionKeys&&n.defaultSelectionKeys.length&&A()}),e.watch(()=>n.autoHeight,()=>{n.autoHeight?_():R()},{immediate:!0}),e.watch(()=>n.noDefaultHeight,()=>{e.nextTick(()=>{I()})});const le=e.computed(()=>n.language==="zh-cn"?C:j),re=e.computed(()=>n.columnsConfig.filter(t=>!t.hidden)),ie=e.computed(()=>n.columnsConfig.filter(t=>!t.hidden&&t.prop!="handle"&&t.slotName!="handle"));function ce(t){let a="";return typeof t=="string"?t.split("?")[1].split("&").forEach((f,u)=>{let d=f.split("="),y=d[0],h=d[1]||d[1]==0?d[1]:"";u==0?a+=`?${y}=${encodeURI(h)}`:a+=`&${y}=${encodeURI(h)}`}):a=t||{},a}function S(){if(n.apiFn){B.value=!0;let t=null;typeof n.query=="string"?t=`?page=${s.currentPage}&size=${s.defaultPageSize}${n.query?"&"+n.query:""}`:t={...n.query,pageNo:s.currentPage,pageSize:s.defaultPageSize},t=ce(t),n.apiFn(t).then(a=>{B.value=!1,(n.responseFn&&typeof n.responseFn=="function"?n.responseFn:F.responseFn&&typeof F.responseFn=="function"?F.responseFn:se).call({dataSource:i,total:w,againGetData:P},a),n.finishCallBack(i)}).catch(()=>{B.value=!1})}}function se(t){i.length=0,t&&t.data&&Array.isArray(t.data)?(i.splice(0,0,...t.data||[]),w.value=i.length):(i.splice(0,0,...t&&t.data&&t.data.list?t.data.list:[]),w.value=t.data.totalCount),P()}function P(){!i.length&&s.currentPage>1&&(s.currentPage=s.currentPage-1,S())}function N(){if(n.tableData)if(w.value=n.tableData.length,i.length=0,n.pagination){let t=(s.currentPage-1)*s.defaultPageSize,a=t+s.defaultPageSize;i.splice(0,0,...n.tableData.slice(t,a)),n.tableData.length&&!i.length&&(t=(s.currentPage-2)*s.defaultPageSize,i.splice(0,0,...n.tableData.slice(t,a)))}else i.splice(0,0,...n.tableData||[])}function A(){e.nextTick(()=>{n.defaultSelectionKeys.forEach(t=>{let a=i.find(l=>l[n.rowKey]===t);a&&r.push(a)}),L()})}function ue(){e.nextTick(()=>{n.changePageKeepSelection&&!n.apiFn&&i.forEach(t=>{var a;r.find(l=>l[n.rowKey]==t[n.rowKey])&&((a=m.value)==null||a.toggleRowSelection(t,!0))})})}function L(){e.nextTick(()=>{m.value&&r.map(t=>{let a=i.find(l=>l[n.rowKey]===t[n.rowKey]);a&&m.value.toggleRowSelection(a,!0)})})}function de(t){let a=r.findIndex(l=>l[n.rowKey]===t[n.rowKey]);a>-1?r.splice(a,1):(console.log(55),r.push(t)),V(r,t)}function V(t,a){if(t=[...t],n.single){r.length=0;let l=!1;t.forEach(f=>{var u;f[n.rowKey]===a[n.rowKey]?l=!0:(u=m.value)==null||u.toggleRowSelection(f,!1)}),l&&r.splice(0,0,a)}else n.changePageKeepSelection?i.forEach(l=>{let f=!!t.find(d=>d[n.rowKey]==l[n.rowKey]),u=r.includes(l);f?u||r.push(l):u&&(r.length=0,r.splice(0,0,...r.filter(d=>d[n.rowKey]!=l[n.rowKey])))}):(r.length=0,r.splice(0,0,...t))}function fe(){s.currentPage=1,S()}function I(){e.nextTick(()=>{var t;(t=m.value)==null||t.doLayout(),$.ctx.$forceUpdate()})}function ge(t){return t?$.ctx.$.setupState[t]:null}function K(){let t=n.containerId||F.containerId;if(!t||!document.getElementById(t))return;let a=[".header"];n.pagination&&a.push("el-pagination"),D.value=pe(a,n.offsetHeight,`#${t}`)}function pe(t,a=100,l=n.containerId,f=n.minHeight){let[u,d]=[document.querySelector(l),a];if(!u)return f;let[y,h]=[u.clientHeight,0];navigator.userAgent.includes("Firefox")&&(d+=20);for(let E of t)u.querySelector(E)&&(d+=u.querySelector(E).clientHeight);return h=y-d,h>f?h:f}function _(){n.autoHeight&&(K(),window.addEventListener("resize",K))}function R(){window.removeEventListener("resize",K)}return e.onMounted(()=>{n.apiFn&&n.autoGetData?S():(r.length=0,i.splice(0,0,...n.tableData||[]),N()),g.value=n.type}),e.onUnmounted(()=>{R()}),e.onUpdated(()=>{_()}),k({getComponentData:ge,refresh:fe,doLayout:I,againGetData:P}),(t,a)=>{const l=e.resolveComponent("el-icon"),f=e.resolveComponent("el-table-column"),u=e.resolveComponent("el-empty"),d=e.resolveComponent("el-table"),y=e.resolveComponent("SuccessFilled"),h=e.resolveComponent("el-card"),E=e.resolveComponent("el-col"),he=e.resolveComponent("el-row"),me=e.resolveComponent("el-pagination"),ye=e.resolveComponent("el-config-provider"),Ee=e.resolveDirective("loading");return e.withDirectives((e.openBlock(),e.createElementBlock("div",null,[e.createElementVNode("div",U,[e.createElementVNode("div",{class:"flex",style:e.normalizeStyle(`padding-right: ${o.toggleConfig.show?"10px":0}`)},[e.renderSlot(t.$slots,"header",{$data:t.$data},void 0,!0)],4),o.toggleConfig.show?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["handle-icons",o.toggleConfig.tgClass])},[e.withDirectives(e.createVNode(l,{title:"列表展示",innerHTML:o.toggleConfig.tableSvgIcon||e.unref(T),onClick:a[0]||(a[0]=c=>{e.isRef(g)?g.value="table":g="table",L()})},null,8,["innerHTML"]),[[e.vShow,e.unref(g)==="card"]]),e.withDirectives(e.createVNode(l,{title:"卡片展示",innerHTML:o.toggleConfig.cardSvgIcon||e.unref(z),onClick:a[1]||(a[1]=c=>e.isRef(g)?g.value="card":g="card")},null,8,["innerHTML"]),[[e.vShow,e.unref(g)==="table"]])],2)):e.createCommentVNode("",!0)]),e.createVNode(ye,{locale:e.unref(le)},{default:e.withCtx(()=>[e.createElementVNode("div",q,[o.columnsConfig.length&&e.unref(g)==="table"?(e.openBlock(),e.createBlock(d,e.mergeProps({key:0,ref_key:"chenTable",ref:m,data:e.unref(i),height:o.noDefaultHeight?null:e.unref(D),maxHeight:o.maxTableHeight||e.unref(D),rowKey:o.rowKey,class:[{hideCheckAll:o.single},"chen-table"],"highlight-current-row":o.currentRow,headerRowClassName:"text-left",border:"",fit:"",stripe:"",onSelect:V,onSelectAll:V},{...o.tableConfig,...t.$attrs}),{empty:e.withCtx(()=>[e.createElementVNode("div",null,[o.emptySlotName?e.renderSlot(t.$slots,o.emptySlotName,{key:0},void 0,!0):(e.openBlock(),e.createBlock(u,{key:1,description:"暂无数据"}))])]),default:e.withCtx(()=>[o.selection?(e.openBlock(),e.createBlock(f,{key:0,type:"selection",width:"55",align:"center",fixed:"left"})):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(re),(c,M)=>(e.openBlock(),e.createBlock(f,e.mergeProps({key:M,"show-overflow-tooltip":""},c),{default:e.withCtx(p=>[c.slotName?e.renderSlot(t.$slots,c.slotName,{key:0,scope:p},void 0,!0):(e.openBlock(),e.createElementBlock("div",Y,e.toDisplayString(p.row[c.prop]),1))]),_:2},1040))),128))]),_:3},16,["data","height","maxHeight","rowKey","class","highlight-current-row"])):e.createCommentVNode("",!0),e.unref(g)==="card"?(e.openBlock(),e.createBlock(he,{key:1,class:"card-wrapper",gutter:20,style:e.normalizeStyle(`height: ${o.noDefaultHeight?"auto":e.unref(D)+"px"}`)},{default:e.withCtx(()=>[e.unref(i).length?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(e.unref(i),(c,M)=>(e.openBlock(),e.createBlock(E,e.mergeProps(o.cardConfig.grid||e.unref(oe),{key:M}),{default:e.withCtx(()=>[e.createElementVNode("div",{class:"card-main",onClick:p=>de(c)},[o.cardConfig&&o.cardConfig.slotName?e.renderSlot(t.$slots,o.cardConfig.slotName,{key:0,scope:{row:c}},void 0,!0):(e.openBlock(),e.createBlock(h,{key:1,style:{width:"100%"}},{default:e.withCtx(()=>[e.createElementVNode("div",G,[e.createElementVNode("div",W,[e.createElementVNode("h4",Q,[e.createElementVNode("span",{title:c.name},e.toDisplayString(c.name),9,X)]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(ie),(p,Ce)=>(e.openBlock(),e.createElementBlock("div",{key:Ce},[p.slotName?(e.openBlock(),e.createElementBlock("div",Z,[e.createElementVNode("div",v,[e.createElementVNode("strong",null,e.toDisplayString(p.label)+"：",1),e.createElementVNode("div",ee,[e.renderSlot(t.$slots,p.slotName,{scope:{row:c}},void 0,!0)])])])):(e.openBlock(),e.createElementBlock("div",te,[e.createElementVNode("strong",null,e.toDisplayString(p.label)+"：",1),e.createElementVNode("span",{class:"flex ellipsis",title:c[p.prop]},e.toDisplayString(c[p.prop]),9,ne)]))]))),128))])]),e.unref(b)?(e.openBlock(),e.createElementBlock("div",{key:0,class:"handle",onClick:a[2]||(a[2]=e.withModifiers(()=>{},["stop"]))},[e.renderSlot(t.$slots,e.unref(b).slotName,{scope:{row:c}},void 0,!0)])):e.createCommentVNode("",!0),e.unref(r).includes(c)?(e.openBlock(),e.createBlock(l,{key:1,class:"el-icon-check"},{default:e.withCtx(()=>[e.createVNode(y)]),_:1})):e.createCommentVNode("",!0)]),_:2},1024))],8,J)]),_:2},1040))),128)):(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[o.cardConfig.emptySlotName?(e.openBlock(),e.createBlock(E,{key:0,span:24},{default:e.withCtx(()=>[e.renderSlot(t.$slots,e.unref(b).slotName,{scope:{row:t.item}},void 0,!0)]),_:3})):(e.openBlock(),e.createBlock(E,{key:1,span:24},{default:e.withCtx(()=>[o.emptySlotName?e.renderSlot(t.$slots,o.emptySlotName,{key:0},void 0,!0):(e.openBlock(),e.createBlock(u,{key:1,description:"暂无数据"}))]),_:3}))],64))]),_:3},8,["style"])):e.createCommentVNode("",!0)]),o.pagination?(e.openBlock(),e.createElementBlock("div",ae,[e.createVNode(me,{background:"",layout:o.pageLayout,"page-sizes":e.unref(s).pageSizes,"page-size":e.unref(s).defaultPageSize,"onUpdate:page-size":a[3]||(a[3]=c=>e.unref(s).defaultPageSize=c),"current-page":e.unref(s).currentPage,"onUpdate:current-page":a[4]||(a[4]=c=>e.unref(s).currentPage=c),total:e.unref(w),onCurrentChange:a[5]||(a[5]=()=>o.apiFn?S():N()),onSizeChange:a[6]||(a[6]=()=>o.apiFn?S():N())},null,8,["layout","page-sizes","page-size","current-page","total"])])):e.createCommentVNode("",!0)]),_:3},8,["locale"])])),[[Ee,e.unref(B)]])}}},[["__scopeId","data-v-b366d092"]]);return x.install=function(o,k={}){o.provide("elTableChenOptions",k),o.component("ElTableChen",x)},x});
