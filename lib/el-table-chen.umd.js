(function(e,E){typeof exports=="object"&&typeof module<"u"?module.exports=E(require("vue")):typeof define=="function"&&define.amd?define(["vue"],E):(e=typeof globalThis<"u"?globalThis:e||self,e.el_table_chen=E(e.Vue))})(this,function(e){"use strict";/*! Element Plus v2.2.28 */var E={name:"zh-cn",el:{colorpicker:{confirm:"确定",clear:"清空"},datepicker:{now:"此刻",today:"今天",cancel:"取消",clear:"清空",confirm:"确定",selectDate:"选择日期",selectTime:"选择时间",startDate:"开始日期",startTime:"开始时间",endDate:"结束日期",endTime:"结束时间",prevYear:"前一年",nextYear:"后一年",prevMonth:"上个月",nextMonth:"下个月",year:"年",month1:"1 月",month2:"2 月",month3:"3 月",month4:"4 月",month5:"5 月",month6:"6 月",month7:"7 月",month8:"8 月",month9:"9 月",month10:"10 月",month11:"11 月",month12:"12 月",weeks:{sun:"日",mon:"一",tue:"二",wed:"三",thu:"四",fri:"五",sat:"六"},months:{jan:"一月",feb:"二月",mar:"三月",apr:"四月",may:"五月",jun:"六月",jul:"七月",aug:"八月",sep:"九月",oct:"十月",nov:"十一月",dec:"十二月"}},select:{loading:"加载中",noMatch:"无匹配数据",noData:"无数据",placeholder:"请选择"},cascader:{noMatch:"无匹配数据",loading:"加载中",placeholder:"请选择",noData:"暂无数据"},pagination:{goto:"前往",pagesize:"条/页",total:"共 {total} 条",pageClassifier:"页",deprecationWarning:"你使用了一些已被废弃的用法，请参考 el-pagination 的官方文档"},messagebox:{title:"提示",confirm:"确定",cancel:"取消",error:"输入的数据不合法!"},upload:{deleteTip:"按 delete 键可删除",delete:"删除",preview:"查看图片",continue:"继续上传"},table:{emptyText:"暂无数据",confirmFilter:"筛选",resetFilter:"重置",clearFilter:"全部",sumText:"合计"},tree:{emptyText:"暂无数据"},transfer:{noMatch:"无匹配数据",noData:"无数据",titles:["列表 1","列表 2"],filterPlaceholder:"请输入搜索内容",noCheckedFormat:"共 {total} 项",hasCheckedFormat:"已选 {checked}/{total} 项"},image:{error:"加载失败"},pageHeader:{title:"返回"},popconfirm:{confirmButtonText:"确定",cancelButtonText:"取消"}}};/*! Element Plus v2.2.28 */var j={name:"en",el:{colorpicker:{confirm:"OK",clear:"Clear",defaultLabel:"color picker",description:"current color is {color}. press enter to select a new color."},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",dateTablePrompt:"Use the arrow keys and enter to select the day of the month",monthTablePrompt:"Use the arrow keys and enter to select the month",yearTablePrompt:"Use the arrow keys and enter to select the year",selectedDate:"Selected date",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},weeksFull:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},inputNumber:{decrease:"decrease number",increase:"increase number"},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},dropdown:{toggleDropdown:"Toggle Dropdown"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},dialog:{close:"Close this dialog"},drawer:{close:"Close this dialog"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input",close:"Close this dialog"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},slider:{defaultLabel:"slider between {min} and {max}",defaultRangeStartLabel:"pick start value",defaultRangeEndLabel:"pick end value"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"}}};const ke="",O=(l,C)=>{const n=l.__vccOpts||l;for(const[T,z]of C)n[T]=z;return n},U={class:"dflex"},q={class:"chen-table-wrapper"},Y={key:1},J=["onClick"],G={class:"dflex"},W={class:"flex ellipsis"},Q={class:"ellipsis"},X=["title"],Z={key:0},v={class:"dflex ellipsis"},ee={class:"flex ellipsis"},te={key:1,class:"dflex ellipsis"},ne=["title"],ae={key:2,class:"el-icon-check el-icon-success"},le={key:0,class:"pagination-wrapper"},x=O({__name:"el-table-chen",props:{type:{type:String,default:"table"},toggleConfig:{type:Object,default:()=>({show:!1,tableIconClass:"",cardIconClass:"",tgClass:""})},apiFn:{type:Function,default:null},responseFn:{type:Function,default:null},tableData:{type:Array,default:null},autoGetData:{type:Boolean,default:!0},currentRow:{type:Boolean,default:!1},query:{type:[String,Object],default:""},tableConfig:{type:Object,default:()=>{}},columnsConfig:{type:Array,default:()=>[]},rowKey:{type:String,default:"id"},selection:{type:Boolean,default:!1},single:{type:Boolean,default:!1},pagination:{type:Boolean,default:!0},pageSizes:{type:Array,default:()=>[10,20,50]},defaultPageSize:{type:Number,default:10},pageLayout:{type:String,default:"total, sizes, prev, pager, next, jumper"},containerId:{type:String,default:""},autoHeight:{type:Boolean,default:!0},offsetHeight:{type:Number,default:70},minHeight:{type:Number,default:200},noDefaultHeight:{type:Boolean,default:!1},maxTableHeight:{type:Number,default:1e12},defaultSelectionKeys:{type:Array,default:()=>[]},cardConfig:{type:Object,default:()=>({slotName:"",emptySlotName:"",grid:{xs:24,sm:12,md:12,lg:8}})},finishCallBack:{type:Function,default:()=>{}},emptySlotName:{type:String,default:""},language:{type:String,default:"zh-cn",validator(l){return["zh-cn","en"].includes(l)}},changePageKeepSelection:{type:Boolean,default:!1}},setup(l,{expose:C}){const n=l;let T=e.ref('<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" data-v-029747aa=""><path fill="currentColor" d="M160 448a32 32 0 0 1-32-32V160.064a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V416a32 32 0 0 1-32 32H160zm448 0a32 32 0 0 1-32-32V160.064a32 32 0 0 1 32-32h255.936a32 32 0 0 1 32 32V416a32 32 0 0 1-32 32H608zM160 896a32 32 0 0 1-32-32V608a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32v256a32 32 0 0 1-32 32H160zm448 0a32 32 0 0 1-32-32V608a32 32 0 0 1 32-32h255.936a32 32 0 0 1 32 32v256a32 32 0 0 1-32 32H608z"></path></svg>'),z=e.ref('<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" data-v-029747aa=""><path fill="currentColor" d="M389.44 768a96.064 96.064 0 0 1 181.12 0H896v64H570.56a96.064 96.064 0 0 1-181.12 0H128v-64h261.44zm192-288a96.064 96.064 0 0 1 181.12 0H896v64H762.56a96.064 96.064 0 0 1-181.12 0H128v-64h453.44zm-320-288a96.064 96.064 0 0 1 181.12 0H896v64H442.56a96.064 96.064 0 0 1-181.12 0H128v-64h133.44z"></path></svg>'),S=e.ref(!1),H=e.ref(!1),B=e.ref(600),g=e.ref("table"),o=e.reactive([]),i=e.reactive([]),k=e.ref(0),s=e.reactive({pageSizes:n.pageSizes,defaultPageSize:n.defaultPageSize,currentPage:1});const m=e.ref(null),$=e.getCurrentInstance(),D=e.inject("elTableChenOptions");let b=e.reactive({}),oe=e.reactive({xs:24,sm:12,md:12,lg:8});e.watch(()=>n.columnsConfig,()=>{b=n.columnsConfig.find(t=>(t.props==="handle"||t.slotName==="handle")&&!t.hidden)}),e.watch(()=>n.tableData,()=>{H.value=!1,o.length=0,F()},{deep:!0,immediate:!0}),e.watch(i,()=>{!n.changePageKeepSelection||n.apiFn?(o.length=0,n.defaultSelectionKeys&&n.defaultSelectionKeys.length&&A()):H.value?de():(n.defaultSelectionIds&&n.defaultSelectionIds.length&&A(),H.value=!0)}),e.watch(()=>n.defaultSelectionKeys,()=>{var t;o.length=0,(t=m.value)==null||t.clearSelection(),n.defaultSelectionKeys&&n.defaultSelectionKeys.length&&A()}),e.watch(()=>n.autoHeight,()=>{n.autoHeight?R():_()},{immediate:!0}),e.watch(()=>n.noDefaultHeight,()=>{e.nextTick(()=>{I()})});const re=e.computed(()=>n.language==="zh-cn"?E:j),ie=e.computed(()=>n.columnsConfig.filter(t=>!t.hidden)),ce=e.computed(()=>n.columnsConfig.filter(t=>!t.hidden&&t.prop!="handle"&&t.slotName!="handle"));function se(t){let a="";return typeof t=="string"?t.split("?")[1].split("&").forEach((f,u)=>{let d=f.split("="),y=d[0],p=d[1]||d[1]==0?d[1]:"";u==0?a+=`?${y}=${encodeURI(p)}`:a+=`&${y}=${encodeURI(p)}`}):a=t||{},a}function w(){if(n.apiFn){S.value=!0;let t=null;typeof n.query=="string"?t=`?page=${s.currentPage}&size=${s.defaultPageSize}${n.query?"&"+n.query:""}`:t={...n.query,pageNo:s.currentPage,pageSize:s.defaultPageSize},t=se(t),n.apiFn(t).then(a=>{S.value=!1,(n.responseFn&&typeof n.responseFn=="function"?n.responseFn:D.responseFn&&typeof D.responseFn=="function"?D.responseFn:ue).call({dataSource:i,total:k,againGetData:P},a),n.finishCallBack(i)}).catch(()=>{S.value=!1})}}function ue(t){i.length=0,t&&t.data&&Array.isArray(t.data)?(i.splice(0,0,...t.data||[]),k.value=i.length):(i.splice(0,0,...t&&t.data&&t.data.list?t.data.list:[]),k.value=t.data.totalCount),P()}function P(){!i.length&&s.currentPage>1&&(s.currentPage=s.currentPage-1,w())}function F(){if(n.tableData)if(k.value=n.tableData.length,i.length=0,n.pagination){let t=(s.currentPage-1)*s.defaultPageSize,a=t+s.defaultPageSize;i.splice(0,0,...n.tableData.slice(t,a)),n.tableData.length&&!i.length&&(t=(s.currentPage-2)*s.defaultPageSize,i.splice(0,0,...n.tableData.slice(t,a)))}else i.splice(0,0,...n.tableData||[])}function A(){e.nextTick(()=>{n.defaultSelectionKeys.forEach(t=>{let a=i.find(r=>r[n.rowKey]===t);a&&o.push(a)}),L()})}function de(){e.nextTick(()=>{n.changePageKeepSelection&&!n.apiFn&&i.forEach(t=>{var a;o.find(r=>r[n.rowKey]==t[n.rowKey])&&((a=m.value)==null||a.toggleRowSelection(t,!0))})})}function L(){e.nextTick(()=>{m.value&&o.map(t=>{let a=i.find(r=>r[n.rowKey]===t[n.rowKey]);a&&m.value.toggleRowSelection(a,!0)})})}function fe(t){let a=o.findIndex(r=>r[n.rowKey]===t[n.rowKey]);a>-1?o.splice(a,1):(o.length=0,o.splice(0,0,...o,t)),V(o,t)}function V(t,a){if(n.single){o.length=0;let r=!1;t.forEach(f=>{var u;f[n.rowKey]===a[n.rowKey]?r=!0:(u=m.value)==null||u.toggleRowSelection(f,!1)}),r&&o.splice(0,0,a)}else n.changePageKeepSelection?i.forEach(r=>{let f=!!t.find(d=>d[n.rowKey]==r[n.rowKey]),u=o.includes(r);f?u||o.push(r):u&&(o.length=0,o.splice(0,0,...o.filter(d=>d[n.rowKey]!=r[n.rowKey])))}):(o.length=0,o.splice(0,0,...t))}function ge(){s.currentPage=1,w()}function I(){e.nextTick(()=>{var t;(t=m.value)==null||t.doLayout(),$.ctx.$forceUpdate()})}function pe(t){return t?$.ctx.$.setupState[t]:null}function K(){let t=n.containerId||D.containerId;if(!t||!document.getElementById(t))return;let a=[".header"];n.pagination&&a.push("el-pagination"),B.value=he(a,n.offsetHeight,`#${t}`)}function he(t,a=100,r=n.containerId,f=n.minHeight){let[u,d]=[document.querySelector(r),a];if(!u)return f;let[y,p]=[u.clientHeight,0];navigator.userAgent.includes("Firefox")&&(d+=20);for(let N of t)u.querySelector(N)&&(d+=u.querySelector(N).clientHeight);return p=y-d,p>f?p:f}function R(){n.autoHeight&&(K(),window.addEventListener("resize",K))}function _(){window.removeEventListener("resize",K)}return e.onMounted(()=>{n.apiFn&&n.autoGetData?w():(o.length=0,i.splice(0,0,...n.tableData||[]),F()),g.value=n.type}),e.onUnmounted(()=>{_()}),e.onUpdated(()=>{R()}),C({getComponentData:pe,refresh:ge,doLayout:I,againGetData:P}),(t,a)=>{const r=e.resolveComponent("el-icon"),f=e.resolveComponent("el-table-column"),u=e.resolveComponent("el-empty"),d=e.resolveComponent("el-table"),y=e.resolveComponent("el-card"),p=e.resolveComponent("el-col"),N=e.resolveComponent("el-row"),me=e.resolveComponent("el-pagination"),ye=e.resolveComponent("el-config-provider"),Ee=e.resolveDirective("loading");return e.withDirectives((e.openBlock(),e.createElementBlock("div",null,[e.createElementVNode("div",U,[e.createElementVNode("div",{class:"flex",style:e.normalizeStyle(`padding-right: ${l.toggleConfig.show?"10px":0}`)},[e.renderSlot(t.$slots,"header",{$data:t.$data},void 0,!0)],4),l.toggleConfig.show?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["handle-icons",l.toggleConfig.tgClass])},[e.withDirectives(e.createVNode(r,{title:"列表展示",innerHTML:l.toggleConfig.tableSvgIcon||e.unref(T),onClick:a[0]||(a[0]=c=>{e.isRef(g)?g.value="table":g="table",L()})},null,8,["innerHTML"]),[[e.vShow,e.unref(g)==="card"]]),e.withDirectives(e.createVNode(r,{title:"卡片展示",innerHTML:l.toggleConfig.cardSvgIcon||e.unref(z),onClick:a[1]||(a[1]=c=>e.isRef(g)?g.value="card":g="card")},null,8,["innerHTML"]),[[e.vShow,e.unref(g)==="table"]])],2)):e.createCommentVNode("",!0)]),e.createVNode(ye,{locale:e.unref(re)},{default:e.withCtx(()=>[e.createElementVNode("div",q,[l.columnsConfig.length&&e.unref(g)==="table"?(e.openBlock(),e.createBlock(d,e.mergeProps({key:0,ref_key:"chenTable",ref:m,data:e.unref(i),height:l.noDefaultHeight?null:e.unref(B),maxHeight:l.maxTableHeight||e.unref(B),rowKey:l.rowKey,class:[{hideCheckAll:l.single},"chen-table"],"highlight-current-row":l.currentRow,headerRowClassName:"text-left",border:"",fit:"",stripe:"",onSelect:V,onSelectAll:V},{...l.tableConfig,...t.$attrs}),{empty:e.withCtx(()=>[e.createElementVNode("div",null,[l.emptySlotName?e.renderSlot(t.$slots,l.emptySlotName,{key:0},void 0,!0):(e.openBlock(),e.createBlock(u,{key:1,description:"暂无数据"}))])]),default:e.withCtx(()=>[l.selection?(e.openBlock(),e.createBlock(f,{key:0,type:"selection",width:"55",align:"center",fixed:"left"})):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(ie),(c,M)=>(e.openBlock(),e.createBlock(f,e.mergeProps({key:M,"show-overflow-tooltip":""},c),{default:e.withCtx(h=>[c.slotName?e.renderSlot(t.$slots,c.slotName,{key:0,scope:h},void 0,!0):(e.openBlock(),e.createElementBlock("div",Y,e.toDisplayString(h.row[c.prop]),1))]),_:2},1040))),128))]),_:3},16,["data","height","maxHeight","rowKey","class","highlight-current-row"])):e.createCommentVNode("",!0),e.unref(g)==="card"?(e.openBlock(),e.createBlock(N,{key:1,class:"card-wrapper",gutter:20,style:e.normalizeStyle(`height: ${l.noDefaultHeight?"auto":e.unref(B)+"px"}`)},{default:e.withCtx(()=>[e.unref(i).length?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(e.unref(i),(c,M)=>(e.openBlock(),e.createBlock(p,e.mergeProps(l.cardConfig.grid||e.unref(oe),{key:M}),{default:e.withCtx(()=>[e.createElementVNode("div",{class:"card-main",onClick:h=>fe(c)},[l.cardConfig&&l.cardConfig.slotName?e.renderSlot(t.$slots,l.cardConfig.slotName,{key:0,scope:{row:c}},void 0,!0):(e.openBlock(),e.createBlock(y,{key:1,style:{width:"100%"}},{default:e.withCtx(()=>[e.createElementVNode("div",G,[e.createElementVNode("div",W,[e.createElementVNode("h4",Q,[e.createElementVNode("span",{title:c.name},e.toDisplayString(c.name),9,X)]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(ce),(h,Ce)=>(e.openBlock(),e.createElementBlock("div",{key:Ce},[h.slotName?(e.openBlock(),e.createElementBlock("div",Z,[e.createElementVNode("div",v,[e.createElementVNode("strong",null,e.toDisplayString(h.label)+"：",1),e.createElementVNode("div",ee,[e.renderSlot(t.$slots,h.slotName,{scope:{row:c}},void 0,!0)])])])):(e.openBlock(),e.createElementBlock("div",te,[e.createElementVNode("strong",null,e.toDisplayString(h.label)+"：",1),e.createElementVNode("span",{class:"flex ellipsis",title:c[h.prop]},e.toDisplayString(c[h.prop]),9,ne)]))]))),128))])]),e.unref(b)?(e.openBlock(),e.createElementBlock("div",{key:0,class:"handle",onClick:a[2]||(a[2]=e.withModifiers(()=>{},["stop"]))},[e.renderSlot(t.$slots,e.unref(b).slotName,{scope:{row:c}},void 0,!0)])):e.createCommentVNode("",!0)]),_:2},1024)),e.unref(o).includes(c)?(e.openBlock(),e.createElementBlock("i",ae)):e.createCommentVNode("",!0)],8,J)]),_:2},1040))),128)):(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[l.cardConfig.emptySlotName?(e.openBlock(),e.createBlock(p,{key:0,span:24},{default:e.withCtx(()=>[e.renderSlot(t.$slots,e.unref(b).slotName,{scope:{row:t.item}},void 0,!0)]),_:3})):(e.openBlock(),e.createBlock(p,{key:1,span:24},{default:e.withCtx(()=>[l.emptySlotName?e.renderSlot(t.$slots,l.emptySlotName,{key:0},void 0,!0):(e.openBlock(),e.createBlock(u,{key:1,description:"暂无数据"}))]),_:3}))],64))]),_:3},8,["style"])):e.createCommentVNode("",!0)]),l.pagination?(e.openBlock(),e.createElementBlock("div",le,[e.createVNode(me,{background:"",layout:l.pageLayout,"page-sizes":e.unref(s).pageSizes,"page-size":e.unref(s).defaultPageSize,"onUpdate:page-size":a[3]||(a[3]=c=>e.unref(s).defaultPageSize=c),"current-page":e.unref(s).currentPage,"onUpdate:current-page":a[4]||(a[4]=c=>e.unref(s).currentPage=c),total:e.unref(k),onCurrentChange:a[5]||(a[5]=()=>l.apiFn?w():F()),onSizeChange:a[6]||(a[6]=()=>l.apiFn?w():F())},null,8,["layout","page-sizes","page-size","current-page","total"])])):e.createCommentVNode("",!0)]),_:3},8,["locale"])])),[[Ee,e.unref(S)]])}}},[["__scopeId","data-v-642156bf"]]);return x.install=function(l,C={}){l.provide("elTableChenOptions",C),l.component("ElTableChen",x)},x});
